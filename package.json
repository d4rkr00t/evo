{
  "name": "evo-monorepo",
  "private": true,
  "workspaces": [
    "packages/*"
  ],
  "evo": {
    "workspaces": [
      "packages/*"
    ],
    "excludes": [
      "**/node_modules",
      "*.md",
      "package.json"
    ],
    "overrides": {
      "packages/cli": {
        "excludes": [
          "vendor",
          "main"
        ],
        "rules": {
          "ci": {
            "cmd": "echo 'CI'",
            "outputs": [],
            "deps": ["test", "build"]
          },
          "build": {
            "cmd": "echo 'BUILDING...'",
            "outputs": [],
            "deps": ["build:mac:amd64", "build:mac:arm64", "build:linux:amd64"]
          },
          "build:mac:amd64": {
            "cmd": "CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build -o 'dist/evo_darwin_amd64/evo' main.go",
            "outputs": ["dist/evo_darwin_amd64"]
          },
          "build:mac:arm64": {
            "cmd": "CGO_ENABLED=0 GOOS=darwin GOARCH=arm64 go build -o 'dist/evo_darwin_arm64/evo' main.go",
            "outputs": ["dist/evo_darwin_arm64"]
          },
          "build:linux:amd64": {
            "cmd": "CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o 'dist/evo_linux_amd64/evo' main.go",
            "outputs": ["dist/evo_linux_amd64"]
          },
          "test": {
            "cmd": "go test ./lib -v",
            "outputs": []
          },
          "test:cov:produce": {
            "cmd": "go test ./lib -coverprofile cov.html",
            "outputs": [
              "cov.html"
            ]
          },
          "test:cov": {
            "cmd": "go tool cover -html=cov.html",
            "outputs": [],
            "deps": [
              "test:cov:produce"
            ]
          }
        }
      }
    }
  },
  "dependencies": {
    "@changesets/cli": "^2.19.0",
    "mkdirp": "^1.0.4"
  },
  "scripts": {
    "setup": "cd packages/cli && go build main.go && cd ../.. && ln -sf ../../packages/cli/main ./node_modules/.bin/evo"
  }
}
