{
  "name": "evo-monorepo",
  "private": true,
  "bolt": {
    "workspaces": [
      "packages/*"
    ]
  },
  "evo": {
    "workspaces": [
      "packages/*",
      "build/*"
    ],
    "excludes": [
      "**/node_modules",
      "*.md",
      "package.json"
    ],
    "overrides": {
      "packages/cli": {
        "excludes": [
          "vendor",
          "main",
          "dist",
          "lib/__testfs__"
        ],
        "rules": {
          "ci": {
            "cmd": "echo 'CI'",
            "outputs": [],
            "deps": ["test", "build"]
          },
          "build": {
            "cmd": "echo 'BUILDING...'",
            "outputs": ["dist"],
            "deps": ["build:mac:amd64", "build:mac:arm64", "build:linux:amd64"]
          },
          "build:mac:amd64": {
            "cmd": "CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build -o 'dist/evo_darwin_amd64/evo' main.go",
            "outputs": ["dist/evo_darwin_amd64"],
            "deps": ["build:version"]
          },
          "build:mac:arm64": {
            "cmd": "CGO_ENABLED=0 GOOS=darwin GOARCH=arm64 go build -o 'dist/evo_darwin_arm64/evo' main.go",
            "outputs": ["dist/evo_darwin_arm64"],
            "deps": ["build:version"]
          },
          "build:linux:amd64": {
            "cmd": "CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o 'dist/evo_linux_amd64/evo' main.go",
            "outputs": ["dist/evo_linux_amd64"],
            "deps": ["build:version"]
          },
          "build:dev": {
            "cmd": "CGO_ENABLED=0 go build -o 'dist/dev/evo' main.go",
            "outputs": ["dist/dev"],
            "deps": ["build:version"]
          },
          "build:version": {
            "cmd": "node version.js",
            "outputs": []
          },
          "test": {
            "cmd": "go test ./lib -v",
            "outputs": []
          },
          "test:cov:produce": {
            "cmd": "go test ./lib -coverprofile cov.html",
            "outputs": [
              "cov.html"
            ]
          },
          "test:cov": {
            "cmd": "go tool cover -html=cov.html",
            "outputs": [],
            "deps": [
              "test:cov:produce"
            ]
          }
        }
      }
    }
  },
  "dependencies": {
    "@changesets/cli": "^2.19.0",
    "mkdirp": "^1.0.4"
  },
  "scripts": {
    "setup": "cd packages/cli && go build main.go && cd ../.. && ln -sf ../../packages/cli/main ./node_modules/.bin/evo",
    "ci:release": "changeset publish",
    "ci:version": "changeset version"
  }
}
